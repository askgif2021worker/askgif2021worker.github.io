{"id":522,"title":"Implementing Ajax Select and Upload Multiple Images Using Jquery","imageUrl":"64912324-60f9-4072-96c5-67456959e460_Multiple_Ajax_Image.jpg","dateCreated":"2019-08-30T10:58:13.141Z","dateModified":"2019-08-30T10:58:26.148Z","contributedBy":"AskGif","content":"<p>Few days back I had posted an article about Multiple ajax image upload without refreshing the page using jquery and PHP. In this post, I have updated a few lines of code that allows to user can select and upload multiple images in a single shot.</p>\r\n<p>&nbsp;</p>\r\n<p>Sample database design for Users.</p>\r\n<p>&nbsp;</p>\r\n<p>Users</p>\r\n<p>Contains user details username, password, email, profile_image and profile_image_small etc.</p>\r\n<pre class=\"language-javascript\"><code>CREATE TABLE `users` (\r\n`user_id` int(11) AUTO_INCREMENT PRIMARY KEY,\r\n`username` varchar(255) UNIQUE KEY,\r\n`password` varchar(100),\r\n`email` varchar(255) UNIQUE KEY\r\n)</code></pre>\r\n<p>&nbsp;</p>\r\n<p>User Uploads</p>\r\n<p>Contains user upload details upload_id, image_name, user_id_fk(foreign key) and timestamp etc.</p>\r\n<pre class=\"language-javascript\"><code>CREATE TABLE  `user_uploads` (\r\n`upload_id` int(11) AUTO_INCREMENT PRIMARY KEY,\r\n`image_name` text,\r\n`user_id_fk` int(11),\r\n`created` int(11)\r\n)</code></pre>\r\n<p>&nbsp;</p>\r\n<p>Javascript Code</p>\r\n<p>$(\"#photoimg\").on('change',function(){})- photoimg is the ID name of INPUT FILE tag and $('#imageform').ajaxForm() - imageform is the ID name of FORM. While changing INPUT it calls FORM submit without refreshing page using ajaxForm() method. Uploaded images will prepend inside #preview tag.</p>\r\n<pre class=\"language-javascript\"><code>&lt;script type=\"text/javascript\" src=\"http://ajax.googleapis.com/\r\najax/libs/jquery/2.1.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;script type=\"text/javascript\" src=\"jquery.wallform.js\"&gt;&lt;/script&gt;\r\n&lt;script type=\"text/javascript\"&gt;\r\n$(document).ready(function() \r\n{ \r\n\r\n$('#photoimg').on('change', function() \r\n {\r\nvar A=$(\"#imageloadstatus\");\r\nvar B=$(\"#imageloadbutton\");\r\n\r\n$(\"#imageform\").ajaxForm({target: '#preview', \r\nbeforeSubmit:function(){\r\nA.show();\r\nB.hide();\r\n}, \r\nsuccess:function(){\r\nA.hide();\r\nB.show();\r\n}, \r\nerror:function(){\r\nA.hide();\r\nB.show();\r\n} }).submit();\r\n});\r\n\r\n}); \r\n&lt;/script&gt;</code></pre>\r\n<p>&nbsp;</p>\r\n<p>Here hiding and showing #imageloadstatus and #imageloadbutton based on form upload submit status.</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>index.php</p>\r\n<p>Contains simple PHP and HTML code. Here $session_id=1 means user id session value.&nbsp;</p>\r\n<pre class=\"language-php\"><code>&lt;?php\r\ninclude('db.php');\r\nsession_start();\r\n$session_id='1'; // User login session value\r\n?&gt;\r\n&lt;div id='preview'&gt;\r\n&lt;/div&gt;\r\n&lt;form id=\"imageform\" method=\"post\" enctype=\"multipart/form-data\" action='ajaxImageUpload.php' style=\"clear:both\"&gt;\r\nUpload image: \r\n&lt;div id='imageloadstatus' style='display:none'&gt;&lt;img src=\"loader.gif\" alt=\"Uploading....\"/&gt;&lt;/div&gt;\r\n&lt;div id='imageloadbutton'&gt;\r\n&lt;input type=\"file\" name=\"photos[]\" id=\"photoimg\" multiple=\"true\" /&gt;\r\n&lt;/div&gt;\r\n&lt;/form&gt;</code></pre>\r\n<p>&nbsp;</p>\r\n<p>ajaxImageUpload.php</p>\r\n<p>Contains PHP code. This script helps you to upload images into the uploads folder and it will rename image file into timestamp+session_id.extention format to avoid duplicates. This system will store image files into user_uploads with user session-id tables</p>\r\n<pre class=\"language-php\"><code>&lt;?php\r\nerror_reporting(0);\r\nsession_start();\r\ninclude('db.php');\r\n$session_id='1'; //$session id\r\ndefine (\"MAX_SIZE\",\"2000\"); // 2MB MAX file size\r\nfunction getExtension($str)\r\n{\r\n$i = strrpos($str,\".\");\r\nif (!$i) { return \"\"; }\r\n$l = strlen($str) - $i;\r\n$ext = substr($str,$i+1,$l);\r\nreturn $ext;\r\n}\r\n// Valid image formats \r\n$valid_formats = array(\"jpg\", \"png\", \"gif\", \"bmp\",\"jpeg\");\r\nif(isset($_POST) and $_SERVER['REQUEST_METHOD'] == \"POST\") \r\n{\r\n$uploaddir = \"uploads/\"; //Image upload directory\r\nforeach ($_FILES['photos']['name'] as $name =&gt; $value)\r\n{\r\n$filename = stripslashes($_FILES['photos']['name'][$name]);\r\n$size=filesize($_FILES['photos']['tmp_name'][$name]);\r\n//Convert extension into a lower case format\r\n$ext = getExtension($filename);\r\n$ext = strtolower($ext);\r\n//File extension check\r\nif(in_array($ext,$valid_formats))\r\n{\r\n//File size check\r\nif ($size &lt; (MAX_SIZE*1024))\r\n{ \r\n$image_name=time().$filename; \r\necho \"&lt;img src='\".$uploaddir.$image_name.\"' class='imgList'&gt;\"; \r\n$newname=$uploaddir.$image_name; \r\n//Moving file to uploads folder\r\nif (move_uploaded_file($_FILES['photos']['tmp_name'][$name], $newname)) \r\n{ \r\n$time=time(); \r\n//Insert upload image files names into user_uploads table\r\nmysql_query(\"INSERT INTO user_uploads(image_name,user_id_fk,created) VALUES('$image_name','$session_id','$time')\");\r\n}\r\nelse \r\n{ \r\necho '&lt;span class=\"imgList\"&gt;You have exceeded the size limit! so moving unsuccessful! &lt;/span&gt;'; } \r\n}\r\n\r\nelse \r\n{ \r\necho '&lt;span class=\"imgList\"&gt;You have exceeded the size limit!&lt;/span&gt;'; \r\n} \r\n\r\n} \r\n\r\nelse \r\n{ \r\necho '&lt;span class=\"imgList\"&gt;Unknown extension!&lt;/span&gt;'; \r\n} \r\n\r\n} //foreach end\r\n\r\n} \r\n?&gt;</code></pre>\r\n<p>&nbsp;</p>\r\n<p>db.php</p>\r\n<p>Database configuration file, just modify database credentials.</p>\r\n<pre class=\"language-php\"><code>&lt;?php\r\n$mysql_hostname = \"localhost\";\r\n$mysql_user = \"username\";\r\n$mysql_password = \"password\";\r\n$mysql_database = \"database\";\r\n$prefix = \"\";\r\n$bd = mysql_connect($mysql_hostname, $mysql_user, $mysql_password) or die(\"Opps some thing went wrong\");\r\nmysql_select_db($mysql_database, $bd) or die(\"Opps some thing went wrong\");\r\n?&gt;</code></pre>\r\n<p>&nbsp;</p>\r\n<p>CSS</p>\r\n<pre class=\"language-css\"><code>#preview\r\n{\r\ncolor:#cc0000;\r\nfont-size:12px\r\n}\r\n.imgList \r\n{\r\nmax-height:150px;\r\nmargin-left:5px;\r\nborder:1px solid #dedede;\r\npadding:4px; \r\nfloat:left; \r\n}</code></pre>","ampImage":"https://raw.githubusercontent.com/sumitc91/AmpImage/main/Blogs/64912324-60f9-4072-96c5-67456959e460_Multiple_Ajax_Image.jpg","subContents":[],"category":{"name":"coding","slug":"coding"},"slug":"implementing-ajax-select-and-upload-multiple-images-using-jquery","tags":[{"name":"jquery","slug":"jquery"},{"name":"ajax","slug":"ajax"}],"recommendations":[{"id":722,"title":"Enabling Zoom using jQuery and CSS.","imageUrl":"a92cf60a-1919-4bc1-a0c8-a9a36f2bea9c_jquery_zoom.jpg","dateCreated":"2019-09-20T09:06:59.937Z","dateModified":"2019-09-20T09:07:35.982Z","contributedBy":"AskGif","content":"In this post, I want to explain about Text Zooming with jQuery and CSS. This is basic level tutorial just changing style using jQuery script. It's simple to use it for zooming website content.&nbsp;\r\nJavascript Code\r\nContains javascript code. $(\"#zoom\").change(funtion(){}- zoom is t","ampImage":"https://raw.githubusercontent.com/sumitc91/AmpImage/main/Blogs/a92cf60a-1919-4bc1-a0c8-a9a36f2bea9c_jquery_zoom.jpg","category":{"name":"coding","slug":"coding"},"tags":[{"name":"css3","slug":"css3"},{"name":"jquery","slug":"jquery"}],"slug":"enabling-zoom-using-jquery-and-css","total":0},{"id":524,"title":"Implementing Live Availability Checking using jQuery.","imageUrl":"3a619955-cf24-4a60-99da-c4133ec9c7f1_livecheck.jpg","dateCreated":"2019-08-30T11:16:51.808Z","dateModified":"2019-08-30T11:17:10.18Z","contributedBy":"AskGif","content":"I received a mail from my reader that asked to me how to implement live username availability checking. So I had prepared a simple and understanding tutorial with changing the background color using jQuery and Ajax\r\n&nbsp;\r\nuser_check.php\r\n$('#username').change(function(){} -","ampImage":"https://raw.githubusercontent.com/sumitc91/AmpImage/main/Blogs/3a619955-cf24-4a60-99da-c4133ec9c7f1_livecheck.jpg","category":{"name":"coding","slug":"coding"},"tags":[{"name":"jquery","slug":"jquery"}],"slug":"implementing-live-availability-checking-using-jquery","total":0},{"id":428,"title":"Creating Bit.ly Short URLs Using Jquery and Ajax.","imageUrl":"8410c428-ce3d-4398-ba04-2d7751199a38_bitly_logo_with_puffer.jpg","dateCreated":"2019-08-19T11:03:33.727Z","dateModified":"2019-08-19T11:04:29.007Z","contributedBy":"AskGif","content":"How to create Bit.ly short URLs using Jquery and Ajax. Many tutorials available on the web about short URLs using the server-side script, this script works on the client-side. It is easy just 5 lines of code calling Bit.ly API. You have to modify the username and API key. Use it and make URLs sho","ampImage":"https://raw.githubusercontent.com/sumitc91/AmpImage/main/Blogs/8410c428-ce3d-4398-ba04-2d7751199a38_bitly_logo_with_puffer.jpg","category":{"name":"coding","slug":"coding"},"tags":[{"name":"ajax","slug":"ajax"},{"name":"jquery","slug":"jquery"}],"slug":"creating-bit.ly-short-urls-using-jquery-and-ajax","total":0},{"id":142,"title":"How to get WYSIHTML5 textarea content cleared?","imageUrl":"1e97ba70-6983-454a-aef1-8dc22c126c32_wysiwyg.jpg","dateCreated":"2018-10-18T05:08:41.249Z","dateModified":"2018-10-18T05:08:49.621Z","contributedBy":"AskGif","content":"I have got a text area having id =\"myTextArea\", I'm able to fetch the content of text area but I'm not able to clear the content once the user successfully submits the data. I'm using a wysihtml5 plugin as my text editor. my code is as follows.\r\n<pre class=\"language-markup\"><code>&lt;textarea","ampImage":"https://raw.githubusercontent.com/sumitc91/AmpImage/main/Blogs/1e97ba70-6983-454a-aef1-8dc22c126c32_wysiwyg.jpg","category":{"name":"coding","slug":"coding"},"tags":[{"name":"questions","slug":"questions"},{"name":"wysihtml5","slug":"wysihtml5"},{"name":"jquery","slug":"jquery"}],"slug":"how-to-get-wysihtml5-textarea-content-cleared","total":0}]}