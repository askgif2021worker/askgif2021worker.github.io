{"id":746,"title":"Implementing Comment System with jQuery, Ajax.","imageUrl":"c2035222-2482-4b07-8b46-d75254c7e0c1_Comments_stucture.jpg","dateCreated":"2019-09-22T10:05:36.221Z","dateModified":"2019-09-22T11:41:49.552Z","contributedBy":"AskGif","content":"<p>Most of the readers commented about displaying existing(old) comments and database design. So in this post, I had updated the old code.<br />This post very well explains how to implement a comment system with Jquery.</p>\r\n<p>&nbsp;</p>\r\n<p>Database Design</p>\r\n<p>Relationship between posts and comments table.</p>\r\n<pre class=\"language-markup\"><code>//Posts Table\r\nCREATE TABLE posts\r\n(\r\npost_id INT PRIMARY KEY AUTO_INCREMENT,\r\npost_title VARCHAR(200),\r\npost_dis TEXT\r\n);\r\n\r\n//Comments Table\r\nCREATE TABLE comments\r\n(\r\ncom_id INT PRIMARY KEY AUTO_INCREMENT,\r\ncom_name VARCHAR(100),\r\ncom_email VARCHAR(100),\r\ncom_dis TEXT,\r\npost_id_fk INT,\r\nFOREIGN KEY(post_id_fk) REFERENCES posts(post_id)\r\n);</code></pre>\r\n<p>&nbsp;</p>\r\n<p>javascript code.</p>\r\n<p>Contains javascript.</p>\r\n<pre class=\"language-javascript\"><code>&lt;script type=\"text/javascript\" src=\"jquery.js\"&gt;&lt;/script&gt;\r\n&lt;script type=\"text/javascript\" &gt;\r\n$(function() {\r\n$(\".submit\").click(function()\r\n{\r\nvar name = $(\"#name\").val();\r\nvar email = $(\"#email\").val();\r\nvar comment = $(\"#comment\").val();\r\nvar post_id = $(\"#post\").val();\r\nvar dataString = 'name='+ name + '&amp;email=' + email + '&amp;comment=' + comment+ '&amp;post_id=' + post_id;\r\nif(name=='' || email=='' || comment=='')\r\n{\r\nalert('Please Give Valid Details');\r\n}\r\nelse\r\n{\r\n$(\"#flash\").show();\r\n$(\"#flash\").fadeIn(400).html('&lt;img src=\"ajax-loader.gif\" /&gt;Loading Comment...');\r\n$.ajax({\r\ntype: \"POST\",\r\nurl: \"commentajax.php\",\r\ndata: dataString,\r\ncache: false,\r\nsuccess: function(html){\r\n$(\"ol#update\").append(html);\r\n$(\"ol#update li:last\").fadeIn(\"slow\");\r\n$(\"#flash\").hide();\r\n}\r\n});\r\n}return false;\r\n}); });\r\n&lt;/script&gt;</code></pre>\r\n<p>&nbsp;</p>\r\n<p>comment.php</p>\r\n<p>Contains HTML code here class timeline li{display:none}</p>\r\n<pre class=\"language-markup\"><code>&lt;ol id=\"update\" class=\"timeline\"&gt;\r\n&lt;?php\r\ninclude('config.php');\r\n//$post_id value comes from the POSTS table\r\n$sql=mysql_query(\"select * from comments where post_id_fk='$post_id'\");\r\nwhile($row=mysql_fetch_array($sql))\r\n{\r\n$name=$row['com_name'];\r\n$email=$row['com_email'];\r\n$comment_dis=$row['com_dis'];\r\n$lowercase = strtolower($email);\r\n$image = md5( $lowercase );\r\n?&gt;\r\n//Displaying existing or old comments\r\n&lt;li class=\"box\"&gt;\r\n&lt;img src=\"http://www.gravatar.com/avatar.php?gravatar_id=&lt;?php echo $image; ?&gt;\" class=\"com_img\"&gt;\r\n&lt;span class=\"com_name\"&gt; &lt;?php echo $name; ?&gt;&lt;/span&gt; &lt;br /&gt;\r\n&lt;?php echo $comment_dis; ?&gt;&lt;/li&gt;\r\n&lt;?php\r\n}\r\n?&gt;\r\n&lt;/ol&gt;\r\n&lt;div id=\"flash\"&gt;&lt;/div&gt;\r\n&lt;div &gt;\r\n&lt;form action=\"#\" method=\"post\"&gt;\r\n&lt;input type=\"hidden\" id=\"name\" value=\"&lt;?php echo $post_id; ?&gt;\"/&gt;\r\n&lt;input type=\"text\" id=\"name\"/&gt;Name&lt;br /&gt;\r\n&lt;input type=\"text\" id=\"email\"/&gt;Email&lt;br /&gt;\r\n&lt;textarea id=\"comment\"&gt;&lt;/textarea&gt;&lt;br /&gt;\r\n&lt;input type=\"submit\" class=\"submit\" value=\" Submit Comment \" /&gt;\r\n&lt;/form&gt;\r\n&lt;/div&gt;</code></pre>\r\n<p>&nbsp;</p>\r\n<p>commentajax.php</p>\r\n<p>Contains PHP and HTML code.</p>\r\n<pre class=\"language-markup\"><code>&lt;?php\r\nif($_POST)\r\n{\r\n$name=$_POST['name'];\r\n$name=mysql_real_escape_string($name);\r\n$email=$_POST['email'];\r\n$email=mysql_real_escape_string($email);\r\n$comment=$_POST['comment'];\r\n$comment=mysql_real_escape_string($comment);\r\n$post_id=$_POST['post_id'];\r\n$post_id=mysql_real_escape_string($post_id);\r\n$lowercase = strtolower($email);\r\n$image = md5( $lowercase );\r\nmysql_query(\"insert into comment(com_name,come_email,com_dis) values ('$name','$email','$comment_dis','$post_id')\");\r\n}\r\n\r\n?&gt;\r\n\r\n&lt;li class=\"box\"&gt;\r\n&lt;img src=\"http://www.gravatar.com/avatar.php?gravatar_id=\r\n&lt;?php echo $image; ?&gt;\"/&gt;\r\n&lt;?php echo $name;?&gt;&lt;br /&gt;\r\n&lt;?php echo $comment; ?&gt;\r\n&lt;/li&gt;</code></pre>","ampImage":"https://raw.githubusercontent.com/sumitc91/AmpImage/main/Blogs/c2035222-2482-4b07-8b46-d75254c7e0c1_Comments_stucture.jpg","subContents":[],"category":{"name":"coding","slug":"coding"},"slug":"implementing-comment-system-with-jquery-ajax","tags":[{"name":"php","slug":"php"},{"name":"jquery","slug":"jquery"},{"name":"ajax","slug":"ajax"}],"recommendations":[{"id":767,"title":"Implementing Auto Load and Refresh Div every 10 Seconds using jQuery.","imageUrl":"6536feff-b8d2-4484-a4e6-0e739f7a26fb_refresh-div.jpg","dateCreated":"2019-09-24T12:56:27.162Z","dateModified":"2019-09-25T09:30:42.984Z","contributedBy":"AskGif","content":"Have you seen this Twitter Search and Facebook shows most recent tweets/posts count from the database every 10 seconds on top of the page. I had developed like this with jQuery and Ajax. It's simple just 5 lines of code\r\nExample 1\r\n&nbsp;\r\nIndex.html\r\nContains javascri","ampImage":"https://raw.githubusercontent.com/sumitc91/AmpImage/main/Blogs/6536feff-b8d2-4484-a4e6-0e739f7a26fb_refresh-div.jpg","category":{"name":"coding","slug":"coding"},"tags":[{"name":"php","slug":"php"},{"name":"jquery","slug":"jquery"}],"slug":"implementing-auto-load-and-refresh-div-every-10-seconds-using-jquery","total":0},{"id":441,"title":"Implementing Flickr Style Live Title Edit Using Jquery and Ajax","imageUrl":"e54b9132-0922-4474-8092-61a5b3813615_flickr.jpg","dateCreated":"2019-08-21T10:43:50.657Z","dateModified":"2019-08-21T10:44:03.434Z","contributedBy":"AskGif","content":"This year's my last post is Flickr like image title edit using jquery, ajax and PHP. I had presented a tutorial in an easy way to interacting DOM object with jquery.&nbsp;\r\n&nbsp;\r\nSample Database Table Code\r\nimage table contains three columns id, title, and images.\r\n<pre","ampImage":"https://raw.githubusercontent.com/sumitc91/AmpImage/main/Blogs/e54b9132-0922-4474-8092-61a5b3813615_flickr.jpg","category":{"name":"coding","slug":"coding"},"tags":[{"name":"jquery","slug":"jquery"},{"name":"ajax","slug":"ajax"},{"name":"php","slug":"php"}],"slug":"implementing-flickr-style-live-title-edit-using-jquery-and-ajax","total":0},{"id":427,"title":"Implementing Facebook Style Tag Friends Using Jquery, Ajax and PHP","imageUrl":"84a39c63-cc7d-4bb0-b23c-b5910f5ffb24_facebooktagfriends.jpg","dateCreated":"2019-08-19T10:41:04.914Z","dateModified":"2019-08-19T10:41:18.412Z","contributedBy":"AskGif","content":"I received a request from my reader that asked to me how to implement Facebook like tag friends in your status or update box. It is great feature to adding friends start with @ symbol. I had tried this with Jquery, Ajax and PHP, it's simple just collabration of my previous posts.\r\n&nbsp;</","ampImage":"https://raw.githubusercontent.com/sumitc91/AmpImage/main/Blogs/84a39c63-cc7d-4bb0-b23c-b5910f5ffb24_facebooktagfriends.jpg","category":{"name":"coding","slug":"coding"},"tags":[{"name":"php","slug":"php"},{"name":"ajax","slug":"ajax"},{"name":"jquery","slug":"jquery"}],"slug":"implementing-facebook-style-tag-friends-using-jquery-ajax-and-php","total":0},{"id":142,"title":"How to get WYSIHTML5 textarea content cleared?","imageUrl":"1e97ba70-6983-454a-aef1-8dc22c126c32_wysiwyg.jpg","dateCreated":"2018-10-18T05:08:41.249Z","dateModified":"2018-10-18T05:08:49.621Z","contributedBy":"AskGif","content":"I have got a text area having id =\"myTextArea\", I'm able to fetch the content of text area but I'm not able to clear the content once the user successfully submits the data. I'm using a wysihtml5 plugin as my text editor. my code is as follows.\r\n<pre class=\"language-markup\"><code>&lt;textarea","ampImage":"https://raw.githubusercontent.com/sumitc91/AmpImage/main/Blogs/1e97ba70-6983-454a-aef1-8dc22c126c32_wysiwyg.jpg","category":{"name":"coding","slug":"coding"},"tags":[{"name":"questions","slug":"questions"},{"name":"wysihtml5","slug":"wysihtml5"},{"name":"jquery","slug":"jquery"}],"slug":"how-to-get-wysihtml5-textarea-content-cleared","total":0}]}